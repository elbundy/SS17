\documentclass[a4paper]{article}

\usepackage[english]{babel}
\usepackage[utf8]{inputenc}
\usepackage{listings}
\usepackage{amsmath}

\usepackage{dcolumn}
\usepackage{booktabs}
\usepackage{tikz}
\usepackage{graphicx}

\usepackage{dcolumn}
\usepackage{booktabs}
\usepackage{tikz}
\usepackage{graphicx}

\usetikzlibrary{positioning,shapes,arrows}

\newcolumntype{M}[1]{D{.}{.}{1.#1}}

\title{Exercise Sheet 7}
\begin{document}
\maketitle

\section*{Problem 7.1}
1)
$$U_A(s) = R(s) + \gamma \cdot max_a(\sum_{s'} U_B(s') \cdot T(s,a,s'))$$
$$U_B(s) = -R(s) + \gamma \cdot max_a(\sum{s'} U_A(s') \cdot T(s, a, s'))$$


\noindent2)

\noindent3)

\begin{tikzpicture}[
  node distance=2cm and 2cm,
  mynode/.style={draw,circle,text width=1cm,align=center},
]

\node[mynode,draw=none] (11) {};
\node[mynode,right=of 11] (12) {$A_1 B_2$};
\node[mynode,right=of 12] (13) {$A_1 B_3$};
\node[mynode,right=of 13] (14) {$A_1 B_4$};

\node[mynode,below=of 11, draw=none] (21) {};
%\node[mynode, left=0.1cm of 21,draw=none] (v1) {$-1$};
\node[mynode,right=of 21, draw=none] (22) {};
\node[mynode,right=of 22] (23) {$A_2 B_3$};
\node[mynode,right=of 23] (24) {$A_2 B_4$};

\node[mynode,below=of 21] (31) {$A_3 B_1$};
\node[mynode, left=0.1cm of 31,draw=none] (v1) {$-1$};
\node[mynode,right=of 31] (32) {$A_3 B_2$};
\node[mynode,right=of 32,draw=none] (33) {};
\node[mynode,right=of 33] (34) {$A_3 B_4$};

\node[mynode,below=of 31, draw=none] (41) {};
\node[mynode,right=of 41, draw=none] (42) {};
%\node[mynode, below=0.1cm of 42,draw=none] (v1) {$+1$};
\node[mynode,right=of 42] (43) {$A_4 B_3$};
\node[mynode, below=0.1cm of 43,draw=none] (v1) {$+1$};
\node[mynode,right=of 43,draw=none] (44) {};

%A
\path (14) edge[->] (24)
%B
(24) edge[->, dashed] (23)
%A
(23) edge[->] (13)
(23) edge[->] (43)
%B
(13) edge[->, dashed] (12)
(13) edge[->, dashed] (14)
%A
(12) edge[->] (32)
%B
(32) edge[->, dashed] (31)
(32) edge[->, dashed] (34)
%A
(34) edge[->] (24)
;
\end{tikzpicture}

\noindent 4)

\section*{Problem 7.2}
$$U_{Up}(\gamma) = 50 - \sum_{i=1}^{100} \gamma^i = 50 - \gamma \sum_{i=0}^{99} \gamma^i = 50 - \gamma \frac{\gamma^{100} -1}{\gamma -1}$$
$$U_{Down}(\gamma) = -50 + \sum_{i=1}^{100} \gamma^i = -50 + \gamma \sum_{i=0}^{99} \gamma^i = -50 + \gamma \frac{\gamma^{100} -1}{\gamma -1}$$

\begin{align*}
    50 - \gamma \frac{\gamma^{100} -1}{\gamma -1} &= -50 + \gamma \frac{\gamma^{100} -1}{\gamma -1}\\
    100 -\gamma \frac{\gamma^{100} -1}{\gamma -1} &= \gamma \frac{\gamma^{100} -1}{\gamma -1} \\
    100 -\frac{\gamma^{101} - \gamma}{\gamma -1} &= \frac{\gamma^{101} - \gamma}{\gamma -1}\\
    50 &= \frac{\gamma^{101} - \gamma}{\gamma -1}\\
    \gamma & \approx 0.984398
\end{align*}

When $\gamma < 0.984398$ the agent will go up, with $\gamma > 0.984398$ he will go down.


\end{document}
